
<div class="col-md-3"><h4>Consigned</h4></div>
<hr/>
<div class="form-group">
    {{ form_label(packingSheetForm.consignedCode, null, {  'label': ' ', 'label_attr':  {
    'class': 'col-sm-4 control-label'
    }}) }}
    <div class="col-sm-10">
        {{ form_errors(packingSheetForm.consignedCode) }}
        {{ form_widget(packingSheetForm.consignedCode, {'attr':  {
        'class': 'form-control'
        }}) }}
    </div>
</div>
<div class="form-group">
    {{ form_label(packingSheetForm.consignedAddressId, null, {  'label': ' ', 'label_attr':  {
    'class': 'col-sm-4 control-label'
    }}) }}
    <div class="col-sm-10">
        {{ form_errors(packingSheetForm.consignedAddressId) }}
        {{ form_widget(packingSheetForm.consignedAddressId, {'attr':  {
        'class': 'form-control'
        }}) }}
    </div>
</div>
<div class="form-group">
    {{ form_label(packingSheetForm.consignedContactId, null, {  'label': ' ', 'label_attr':  {
    'class': 'col-sm-4 control-label'
    }}) }}
    <div class="col-sm-10">
        {{ form_errors(packingSheetForm.consignedContactId) }}
        {{ form_widget(packingSheetForm.consignedContactId, {'attr':  {
        'class': 'form-control'
        }}) }}
    </div>
</div>

<div class="col-md-3"><h4>Delivery</h4></div>
<hr/>
<div class="form-group">
    {{ form_label(packingSheetForm.deliveryCode, null, {  'label': ' ', 'label_attr':  {
    'class': 'col-sm-4 control-label'
    }}) }}
    <div class="col-sm-10">
        {{ form_errors(packingSheetForm.deliveryCode) }}
        {{ form_widget(packingSheetForm.deliveryCode, {'attr':  {
        'class': 'form-control'
        }}) }}
    </div>
</div>
<div class="form-group">
    {{ form_label(packingSheetForm.deliveryAddressId, null, {  'label': ' ', 'label_attr':  {
    'class': 'col-sm-4 control-label'
    }}) }}
    <div class="col-sm-10">
        {{ form_errors(packingSheetForm.deliveryAddressId) }}
        {{ form_widget(packingSheetForm.deliveryAddressId, {'attr':  {
        'class': 'form-control'
        }}) }}
    </div>
</div>
<div class="form-group">
    {{ form_label(packingSheetForm.deliveryContactId, null, {  'label': ' ', 'label_attr':  {
    'class': 'col-sm-4 control-label'
    }}) }}
    <div class="col-sm-10">
        {{ form_errors(packingSheetForm.deliveryContactId) }}
        {{ form_widget(packingSheetForm.deliveryContactId, {'attr':  {
        'class': 'form-control'
        }}) }}
    </div>
</div>

<script>
	var $code = $('#packing_sheet_consignedCode');
	$code.change (function() {
	
		var $form = $(this).closest('form');
		var $data = {};
		$data[$code.attr('id')] = $code.val();
		$data['flag'] = "consigned_code";
		//alert($data[$code.attr('id')]);
		$.ajax ({
			url: $(location).attr('href'),
			type: $form.attr('method'),
			data: $data,
			success: function(data) {
				//alert('test');
				select = document.getElementById('packing_sheet_consignedAddressId');
				
				datastring = JSON.stringify(data.consignedAddresses);
				alert(datastring);

				$('#packing_sheet_consignedAddressId').empty();
				$.each(data.consignedAddresses, function(index, element){
					//alert(element.id);
					var opt = document.createElement('option');
                    opt.value = element.id;
                    opt.innerHTML = element.label;
                    select.appendChild(opt);
				});
    			
			}
	});
});
</script>